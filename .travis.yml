sudo: false
dist: trusty
language: node_js
node_js:
  - node

cache:
  directories:
    - node_modules

branches:
  except:
    - gh-pages

notifications:
  email:
    on_success: change
    on_failure: always

stages:
  - Lint/Build
  - name: Deployment
    if: branch = master

jobs:
  include:

    - stage: Lint/Build
      script:
        - npm run lint
        - npm run build

    - stage: Deployment
      env:
        - secure: UKwerxtS16CPVjYkIbrdvQttkdYPtDSgVh8s0DT9RDsPky9hff/8e2fYYqn5zt9obvPVoLpLRZ+a58DiS0C6aw48n9enfvCD/F0gQCYTEVaxpGL4RtlRBSH6HC9kCC7Xji21Ba3LvmvXmG1c3vAl67xjM4QuAPoVogS/PV35wx+S9rKcNLLrtEw536TkvBoS2NyYwSvuy9JrIvRRYz1KLs46Btqj+bWsGVSGOJ88KivqCK0c09TFp3DPquSutVBQ++OiEJYTGVWdvIJVNW52UQqi2dnfLAi+HsmY00xeiya/EzEusNONqIRBEPJh74SL3dyHoChOI3nKQdHuUdNzL0AYNvaX45f2oBVPS2wbz2P3BzMotUFPmCpLH12EDQfat1E2to9rJu564wmISLYP9o4UlAO8phxPj2ownBi9eJEdjkyWGhpktmKJNdMFLDTbLLbZr/hlQ3b6N1Ri9RGNG973wdPtcxRXdCyi0T4m3Ji1C5oQ9h8y6UJZZqgLjxsbq4r3onAccXZt7AibUdb78o1I34MbRysXT6ihKFM/mpc8OvKscnuh3HkRE/mK7RnIAsBrFkqRQMBoBvek43eyGzMYId/dNZY7uyfQ3SN55WtrZqu3/oBd6c6TTftjD35uaI5MTEd0++mwW3sEe3aMwJLWadawOZx2cuwyOV1ubMY=
        - secure: hbF5y390LcU+zr9sEO32yLtk7QXy28aLsW7y6sUubHNdt8OrdSHsx6VHhH6VDzqfftIUqqR8/AUIWYQ2esJuL6BA+ry3DnxwkEwzzD1uxG33z9JMi3/vZ9k6h3gvfVVFf34xX8fQbCLl3XtHms4NjlAVjNpfrYiFMJmp0/2T8Ety39eNQdB9CN6wyrZqC8/GHulsDxDHDOAWEwjZlmgOy21AaAU4iq7Glhdsu/i8xhXpcn52bnQBIWZTNYa4KhEEQ3GYQ2ap2scTrhfGwzU7w3efBytQrnrSJmaVluEk+ZtZP5Yd4Z+oejADUrSpr0pHop3h/EhGvgSkeBkfhtAnUm+fiDbgTJilIGJKyV3AN5PGXe809fAqQCRIFJe2NHQ5aNdIOQvPpi9DIp5faj4J1697/sSWNUFWdDt23ChUMpcozOYs0s6jzA4ICesRuSBDM/6X0b9vRIrK0xG7+ltJSbZj/H/V405w9BogCrP2j+J+i1n0Bf37wrEeH+fnOCBwmA7U28v2mR0uSmfmkOJ6XzxhJbTHx9Jlsafl/wzTwF7bqF0lT+gbUFbxuDCOE4OAV8KGv9S0jjHKqrHs3N40lzXL+y6X52t1hCbE4lZWcqLEBGtiLdqp5CBVX/UssGnR1dsmpVaX7KhK7qg8eIGpgDG/ESfcQ8mp0XTyBQ9B7gE=
      script:
        - npm run deploy
